// Recidiviz - a data platform for criminal justice reform
// Copyright (C) 2023 Recidiviz, Inc.
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <https://www.gnu.org/licenses/>.
// =============================================================================

import { CompliantReportingReferralRecordFullRaw } from "../../src/WorkflowsStore/Opportunity/UsTn";
import { fixtureWithIdKey } from "./utils";

export const usTnCompliantReportingReferrals =
  fixtureWithIdKey<CompliantReportingReferralRecordFullRaw>("externalId", [
    // Eligible in old schema
    {
      stateCode: "US_TN",
      eligibilityCategory: "c1",
      eligibleLevelStart: "2019-10-26",
      judicialDistrict: "17",
      lifetimeOffensesExpired: ["HABITUAL TRAFFIC OFFENDER"],
      drugScreensPastYear: [{ result: "DRUN", date: "2022-01-26" }],
      sanctionsPastYear: [],
      mostRecentArrestCheck: "2022-01-03",
      pastOffenses: [],
      finesFeesEligible: "low_balance",
      zeroToleranceCodes: [],
      poFirstName: "TEST",
      poLastName: "OFFICER1",
      clientFirstName: "TONYE",
      clientLastName: "THOMPSON",
      dateToday: "2022-03-23",
      tdocId: "100",
      externalId: "100",
      physicalAddress: "999 N. Fake St., Nashville, TN 37011     ",
      currentEmployer: null,
      driversLicense: "12345678",
      driversLicenseSuspended: null,
      driversLicenseRevoked: null,
      convictionCounty: "BRISTOL GENERAL SESSIONS",
      courtName: null,
      allDockets: null,
      currentOffenses: ["FAILURE TO APPEAR (FELONY)"],
      supervisionType: "TN PROBATIONER",
      sentenceStartDate: "2019-10-26",
      restitutionAmt: "400.0",
      restitutionMonthlyPayment: "0.0",
      restitutionMonthlyPaymentTo: ["2ND JUDICIAL DRUG TASK FORCE"],
      specialConditionsTerminatedDate: "2021-12-31",
      specialConditionsFlag: "terminated",
      specialConditionsAlcDrugScreen: null,
      specialConditionsAlcDrugScreenDate: "2022-03-01",
      eligibleCriteria: {},
      ineligibleCriteria: {},
      formInformation: {},
      metadata: {},
      caseNotes: {},
    },
    // Eligible in old schema
    {
      stateCode: "US_TN",
      poFirstName: "TEST",
      poLastName: "OFFICER1",
      clientFirstName: "LINET",
      clientLastName: "HANSEN",
      dateToday: "2022-03-23",
      tdocId: "101",
      externalId: "101",
      physicalAddress: "123 Fake St, Nashville, Tn 37011     ",
      currentEmployer: null,
      driversLicense: null,
      driversLicenseSuspended: null,
      driversLicenseRevoked: null,
      convictionCounty: "010",
      courtName: null,
      allDockets: null,
      currentOffenses: [
        "FAILURE TO APPEAR (FELONY)",
        "FAILURE TO APPEAR (FELONY)",
      ],
      nextSpecialConditionsCheck: "2022-12-31",
      lastSpecialConditionsNote: "2021-12-31",
      specialConditionsFlag: "current",
      eligibilityCategory: "c3",
      eligibleLevelStart: "2019-12-20",
      judicialDistrict: "14",
      lifetimeOffensesExpired: [],
      drugScreensPastYear: [
        { result: "DRUN", date: "2021-09-17" },
        { result: "DRUM", date: "2022-02-02" },
      ],
      sanctionsPastYear: [{ ProposedSanction: "IPDS" }],
      mostRecentArrestCheck: "2022-01-03",
      finesFeesEligible: "regular_payments",
      pastOffenses: ["BURGLARY-AUTO"],
      zeroToleranceCodes: [
        {
          contactNoteType: "ZTVR",
          contactNoteDate: "2018-04-20",
        },
        {
          contactNoteType: "VWAR",
          contactNoteDate: "2017-08-30",
        },
        {
          contactNoteType: "COHC",
          contactNoteDate: "2016-06-27",
        },
        {
          contactNoteType: "VWAR",
          contactNoteDate: "2018-01-30",
        },
        {
          contactNoteType: "COHC",
          contactNoteDate: "2019-07-29",
        },
      ],
      supervisionType: "TN PROBATIONER",
      sentenceStartDate: "2022-01-17",
      sentenceLengthDays: "730",
      expirationDate: "2024-01-17",
      restitutionAmt: "0.0",
      restitutionMonthlyPayment: "0.0",
      specialConditionsAlcDrugScreenDate: "2021-08-05",
      offenseTypeEligibility: "2",
      eligibleCriteria: {},
      ineligibleCriteria: {},
      formInformation: {},
      metadata: {},
      caseNotes: {},
    },
    // Eligible in old schema
    {
      stateCode: "US_TN",
      poFirstName: "TEST",
      poLastName: "OFFICER2",
      clientFirstName: "REBEKAH",
      clientLastName: "CORTES",
      dateToday: "2022-03-23",
      tdocId: "102",
      externalId: "102",
      physicalAddress: "678 Fake Circle, Nashville, Tn 37012     ",
      currentEmployer: null,
      driversLicense: null,
      driversLicenseSuspended: null,
      driversLicenseRevoked: null,
      convictionCounty: "051",
      courtName: null,
      allDockets: null,
      currentOffenses: [
        "BURGLARY-OTHER THAN HABITATION",
        "THEFT OF PROPERTY - $1,000-$10,000",
      ],
      drugScreensPastYear: [{ result: "DRUN", date: "2021-11-26" }],
      supervisionType: "TN PROBATIONER",
      sentenceStartDate: "2020-01-17",
      sentenceLengthDays: "1096",
      expirationDate: "2023-01-17",
      restitutionAmt: "136.0",
      restitutionMonthlyPayment: "0.0",
      restitutionMonthlyPaymentTo: ["FAKE PERSON"],
      eligibleCriteria: {},
      ineligibleCriteria: {},
      formInformation: {},
      metadata: {},
      caseNotes: {},
    },
    // Almost Eligible in old schema
    {
      stateCode: "US_TN",
      poFirstName: "TEST",
      poLastName: "OFFICER2",
      clientFirstName: "RAMONDA",
      clientLastName: "UNDERWOOD",
      dateToday: "2022-03-23",
      tdocId: "104",
      externalId: "104",
      physicalAddress: "254 Fake St, Nashville, Tn 37011     ",
      currentEmployer: null,
      driversLicense: null,
      driversLicenseSuspended: null,
      driversLicenseRevoked: null,
      convictionCounty: "089",
      courtName: null,
      allDockets: null,
      currentOffenses: ["THEFT OF PROPERTY - $10,000-$60,000"],
      supervisionType: "DIVERSION",
      sentenceStartDate: "2022-08-26",
      sentenceLengthDays: "1095",
      expirationDate: "2025-08-26",
      eligibilityCategory: "c1",
      eligibleLevelStart: "2020-04-07",
      judicialDistrict: null,
      lifetimeOffensesExpired: ["TNCARE FRAUD"],
      drugScreensPastYear: [{ result: "DRUX", date: "2021-11-26" }],
      sanctionsPastYear: [{ ProposedSanction: "OPRD" }],
      mostRecentArrestCheck: "2022-01-03",
      pastOffenses: [],
      finesFeesEligible: "exempt",
      zeroToleranceCodes: [],
      nextSpecialConditionsCheck: "2022-12-31",
      lastSpecialConditionsNote: "2021-12-31",
      specialConditionsFlag: "current",
      supervisionFeeAssessed: null,
      supervisionFeeArrearaged: "0",
      remainingCriteriaNeeded: 1,
      almostEligibleCriteria: {
        recentRejectionCodes: ["DECF", "DEDU"],
      },
      eligibleCriteria: {},
      ineligibleCriteria: {},
      formInformation: {},
      metadata: {},
      caseNotes: {},
    },
    // Eligible in old and new schemas
    {
      stateCode: "US_TN",
      poFirstName: "Sally",
      poLastName: "Slithers",
      clientFirstName: "Harry",
      dateToday: "2022-03-25",
      tdocId: "201",
      currentEmployer: "WAIVER",
      driversLicense: "12345",
      drugScreensPastYear: [],
      eligibilityCategory: "c2",
      finesFeesEligible: "regular_payments",
      currentOffenses: ["THEFT"],
      remainingCriteriaNeeded: 0,
      mostRecentArrestCheck: "2023-03-01",
      lifetimeOffensesExpired: [],
      zeroToleranceCodes: [
        { contactNoteDate: "2020-02-02", contactNoteType: "COHC" },
        { contactNoteDate: "2020-03-03", contactNoteType: "PWAR" },
      ],
      supervisionType: "TN PAROLEE",
      supervisionFeeAssessed: "0.0",
      supervisionFeeArrearaged: false,
      supervisionFeeArrearagedAmount: "0.0",
      supervisionFeeExemptionType: ["SSDB", "SSDB"],
      supervisionFeeWaived: "Fees Waived",
      courtCostsPaid: false,
      specialConditionsAlcDrugScreen: false,
      specialConditionsAlcDrugAssessmentComplete: false,
      specialConditionsAlcDrugTreatment: false,
      specialConditionsAlcDrugTreatmentCurrent: false,
      specialConditionsCounseling: false,
      specialConditionsCounselingAngerManagementCurrent: false,
      specialConditionsCommunityService: false,
      specialConditionsCommunityServiceCurrent: false,
      specialConditionsProgramming: false,
      specialConditionsProgrammingCognitiveBehavior: false,
      specialConditionsProgrammingCognitiveBehaviorCurrent: false,
      specialConditionsProgrammingSafe: false,
      specialConditionsProgrammingSafeCurrent: false,
      specialConditionsProgrammingVictimImpact: false,
      specialConditionsProgrammingVictimImpactCurrent: false,
      specialConditionsProgrammingFsw: false,
      specialConditionsProgrammingFswCurrent: false,
      externalId: "201",
      eligibleCriteria: {
        usTnFinesFeesEligible: {
          hasFinesFeesBalanceBelow500: { amountOwed: 45 },
          hasPayments3ConsecutiveMonths: {
            amountOwed: 45,
            consecutiveMonthlyPayments: 3,
          },
          hasPermanentFinesFeesExemption: {
            currentExemptions: ["SSDB", "SSDB"],
          },
        },
        usTnNoArrestsInPastYear: null,
        usTnNoHighSanctionsInPastYear: null,
        usTnNoRecentCompliantReportingRejections: null,
        usTnSpecialConditionsAreCurrent: {
          speNoteDue: "2023-10-01",
        },
        usTnNotServingIneligibleCrOffense: null,
      },
      ineligibleCriteria: {},
      formInformation: {
        sentenceStartDate: "2013-10-09",
        currentOffenses: ["BURGLARY"],
      },
      metadata: {
        allOffenses: ["BURGLARY", "THEFT"],
        convictionCounties: ["123 - ABC", "456 - DEF"],
        ineligibleOffensesExpired: [],
        mostRecentArrestCheck: {
          contactDate: "2023-03-01",
          contactType: "ARRN",
        },
        mostRecentSpeNote: {
          contactDate: "2023-03-01",
          contactType: "SPEC",
        },
      },
      caseNotes: {},
    },
    // Almost eligible in old and new schemas
    {
      stateCode: "US_TN",
      poFirstName: "TEST",
      poLastName: "OFFICER1",
      clientFirstName: "LINDA",
      clientLastName: "SMITH",
      dateToday: "2022-03-25",
      tdocId: "202",
      externalId: "202",
      drugScreensPastYear: [],
      eligibilityCategory: "c3",
      finesFeesEligible: "ineligible",
      remainingCriteriaNeeded: 1,
      currentOffenses: ["FAILURE TO APPEAR (FELONY)"],
      supervisionType: "TN PROBATIONER",
      supervisionFeeArrearaged: false,
      supervisionFeeExemptionType: null,
      mostRecentArrestCheck: "2023-04-01",
      almostEligibleCriteria: {
        paymentNeeded: true,
      },
      lifetimeOffensesExpired: [],
      courtCostsPaid: false,
      specialConditionsAlcDrugScreen: false,
      specialConditionsAlcDrugAssessmentComplete: false,
      specialConditionsAlcDrugTreatment: false,
      specialConditionsAlcDrugTreatmentCurrent: false,
      specialConditionsCounseling: false,
      specialConditionsCounselingAngerManagementCurrent: false,
      specialConditionsCommunityService: false,
      specialConditionsCommunityServiceCurrent: false,
      specialConditionsProgramming: false,
      specialConditionsProgrammingCognitiveBehavior: false,
      specialConditionsProgrammingCognitiveBehaviorCurrent: false,
      specialConditionsProgrammingSafe: false,
      specialConditionsProgrammingSafeCurrent: false,
      specialConditionsProgrammingVictimImpact: false,
      specialConditionsProgrammingVictimImpactCurrent: false,
      specialConditionsProgrammingFsw: false,
      specialConditionsProgrammingFswCurrent: false,
      eligibleCriteria: {
        usTnNoArrestsInPastYear: null,
        usTnNoHighSanctionsInPastYear: null,
        usTnSpecialConditionsAreCurrent: {
          speNoteDue: null,
        },
        usTnNotServingIneligibleCrOffense: null,
      },
      ineligibleCriteria: {
        usTnFinesFeesEligible: {
          hasFinesFeesBalanceBelow500: { amountOwed: 700 },
          hasPayments3ConsecutiveMonths: {
            amountOwed: 700,
            consecutiveMonthlyPayments: null,
          },
        },
      },
      formInformation: {
        sentenceStartDate: "2020-03-07",
        currentOffenses: ["EVADING ARREST"],
      },
      metadata: {
        allOffenses: ["FAILURE TO APPEAR (FELONY)", "EVADING ARREST"],
        convictionCounties: ["123ABC"],
        ineligibleOffensesExpired: [],
        mostRecentArrestCheck: {
          contactDate: "2023-04-01",
          contactType: "ARRN",
        },
        mostRecentSpeNote: {
          contactDate: "2019-08-15",
          contactType: "SPET",
        },
      },
      caseNotes: {},
    },
  ]);
