doctype html
html
  head
    script.
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
      analytics.load("YDsBLA1staRM3Eg0zXEA3hGnA42teFUe");
      analytics.page();
      }}();
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1, shrink-to-fit=no')
    title Recidiviz Dashboard
    style.
      #loader {
      transition: all 0.3s ease-in-out;
      opacity: 1;
      visibility: visible;
      position: fixed;
      height: 100vh;
      width: 100%;
      background: #fff;
      z-index: 90000;
      }
      #loader.fadeOut {
      opacity: 0;
      visibility: hidden;
      }
      .spinner {
      width: 40px;
      height: 40px;
      position: absolute;
      top: calc(50% - 20px);
      left: calc(50% - 20px);
      background-color: #333;
      border-radius: 100%;
      -webkit-animation: sk-scaleout 1.0s infinite ease-in-out;
      animation: sk-scaleout 1.0s infinite ease-in-out;
      }
      @-webkit-keyframes sk-scaleout {
      0% { -webkit-transform: scale(0) }
      100% {
      -webkit-transform: scale(1.0);
      opacity: 0;
      }
      }
      @keyframes sk-scaleout {
      0% {
      -webkit-transform: scale(0);
      transform: scale(0);
      } 100% {
      -webkit-transform: scale(1.0);
      transform: scale(1.0);
      opacity: 0;
      }
      }
  body.app
    // @TOC
    // ===================================================
    //
      + @Page Loader
      + @App Content
      - #Left Sidebar
      > $Sidebar Header
      > $Sidebar Menu
      - #Main
      > $Topbar
      > $App Screen Content
    // @Page Loader
    // ===================================================
    #loader
      .spinner
    script.
      window.addEventListener('load', () => {
      const loader = document.getElementById('loader');
      setTimeout(() => {
      loader.classList.add('fadeOut');
      }, 300);
      });
    // @App Content
    // ===================================================
    div
      // #Main ============================
      div
        // ### $Topbar ###
        .header.wide-navbar
          .header-container
            ul.nav-left
              li(style='padding-left:20px;padding-top:22px;')
                .peers.ai-c.fxw-nw
                  .peer
                    .col-md-3.my-auto.peer
                        i.c-blue-500.ti-pulse
                  .col-md-9.my-auto.peer.peer-greed
                    h5.lh-1.mB-0.logo-text.c-blue-500 Recidiviz
            ul.nav-right
              li.dropdown
                if locals.user
                  a.dropdown-toggle.no-after.peers.fxw-nw.ai-c.lh-1(href='', data-toggle='dropdown')
                    .peer.mR-10
                      img.w-2r.bdrs-50p(src=user.picture)
                    .peer
                      span.fsz-sm.c-grey-900 #{user.displayName}
                  ul.dropdown-menu.fsz-sm
                    li
                      a.d-b.td-n.pY-5.bgcH-grey-100.c-grey-700(href='')
                        i.ti-settings.mR-10
                        span Settings
                    li
                      a.d-b.td-n.pY-5.bgcH-grey-100.c-grey-700(href='/user')
                        i.ti-user.mR-10
                        span Profile
                    li.divider(role='separator')
                    li
                      a.d-b.td-n.pY-5.bgcH-grey-100.c-grey-700(href='/logout')
                        i.ti-power-off.mR-10
                        span Logout
                else
                  a.d-b.td-n.pY-5.bgcH-grey-100.c-grey-700(href='/login')
                    i.ti-power-off.mR-10
                    span.fsz-sm.c-grey-900 Login
        // ### $App Screen Content ###
        main.main-content.bgc-grey-100
          #mainContent.container
            .row.jc-c.pT-40.pos-r
              if locals.user
                .col-12.text-center
                  h2 Explore
                .col-12
                  ul.sidebar-menu.scrollable.pos-r
                    li.nav-item.mT-30.active
                      a.sidebar-link(href='snapshots')
                        span.icon-holder
                          i.c-blue-500.ti-dashboard
                        span.title Snapshots
                    li.nav-item
                      a.sidebar-link(href='revocations')
                        span.icon-holder
                          i.c-brown-500.ti-unlink
                        span.title Revocations
                    li.nav-item
                      a.sidebar-link(href='reincarcerations')
                        span.icon-holder
                          i.c-red-500.ti-reload
                        span.title Reincarcerations
                    li.nav-item
                      a.sidebar-link(href='program-evaluation')
                        span.icon-holder
                          i.c-orange-500.ti-ruler-alt
                        span.title Program Evaluation
              else
                .col-12.text-center
                  a.d-b.td-n.pY-5.bgcH-grey-100.c-grey-700(href='/login')
                    i.ti-power-off.mR-10
                    h2 Login to get started

        // ### $App Screen Footer ###
        footer.bdT.ta-c.p-30.lh-0.fsz-sm.c-grey-600
          span
            | Copyright Â© 2019
            |
            a(href='https://www.recidiviz.org/', _target='_blank', title='Recidiviz') Recidiviz
            | .
            |
          span
            | Based on Adminator template designed by
            |
            a(href='https://colorlib.com', target='_blank', title='Colorlib') Colorlib
            | . All rights reserved.
    script(type='text/javascript', src='vendor.js')
    script(type='text/javascript', src='bundle.js')
